{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/weixinapp/ResumeBoost/resume-optimization-frontend/pages/index/index.vue?0e27","webpack:///D:/weixinapp/ResumeBoost/resume-optimization-frontend/pages/index/index.vue?5089","webpack:///D:/weixinapp/ResumeBoost/resume-optimization-frontend/pages/index/index.vue?cae1","uni-app:///pages/index/index.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","title","resumeList","methods","handleUploadResume","token","uni","icon","url","count","type","extension","res","file","fileExtension","uploadRes","console","getFileExtension","uploadFile","filePath","name","header","formData","fileName","success","resolve","reject","fail","handleMyResume","request","response"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAinB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACyCroB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAC;IACA;MACAC;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAC;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBACAC;kBAAAL;kBAAAM;gBAAA;gBAAA,iCACAD;kBAAAE;gBAAA;cAAA;gBAAA;gBAAA,OAIAF;kBACAG;kBACAC;kBACAC;gBACA;cAAA;gBAJAC;gBAMA;gBACAC,yBAEA;gBACAC;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACAR;kBACAL;kBACAM;gBACA;gBAAA;cAAA;gBAAA;gBAAA,OAKA;cAAA;gBAAAQ;gBAAA,MAGAA;kBAAA;kBAAA;gBAAA;gBACAT;kBAAAL;gBAAA;gBAAA;gBAAA;cAAA;gBAAA,MAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAe;gBACAV;kBACAL;kBACAM;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAU;MACA;MACA;QACA;MACA;;MACA;IACA;IAEA;IACAC;MACA;QACAZ;UACAE;UACAW;UACAC;UACAC;YACA;YACA;UACA;UACAC;YACAC;UACA;;UACAC;YACA;cACA;cACAC;YACA;cACAC;YACA;UACA;UACAC;YACAD;UACA;QACA;MACA;IACA;IAEA;IACAE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAvB;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBACAC;kBAAAL;kBAAAM;gBAAA;gBAAA,kCACAD;kBAAAE;gBAAA;cAAA;gBAAA;gBAAA,OAIAqB;kBACAxB;gBACA;cAAA;gBAFAyB;gBAAA,MAIAA;kBAAA;kBAAA;gBAAA;gBACA;gBACAxB;kBACAE;gBACA;gBAAA;gBAAA;cAAA;gBAAA,MAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAQ;gBACAV;kBACAL;kBACAM;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.css?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <!-- 顶部横幅图 -->\n    <image \n      class=\"banner\" \n      src=\"/static/img/back.png\" \n      mode=\"widthFix\"\n    ></image>\n\n    <!-- 四宫格功能区域 -->\n    <view class=\"grid-container\">\n      <!-- 第一行 -->\n      <view class=\"grid-row\">\n        <view class=\"grid-item\" @click=\"handleUploadResume\">\n          <image class=\"grid-icon\" src=\"/static/icon/upload-file.png\"></image>\n          <text class=\"grid-text\">上传简历</text>\n        </view>\n        \n        <view class=\"grid-item\">\n          <image class=\"grid-icon\" src=\"/static/icon/boost.png\"></image>\n          <text class=\"grid-text\">简历优化</text>\n        </view>\n      </view>\n\n      <!-- 第二行 -->\n      <view class=\"grid-row\">\n        <view class=\"grid-item\">\n          <image class=\"grid-icon\" src=\"/static/icon/heart.png\"></image>\n          <text class=\"grid-text\">我的收藏</text>\n        </view>\n        \n        <view class=\"grid-item\" @click=\"handleMyResume\">\n          <image class=\"grid-icon\" src=\"/static/icon/label.png\"></image>\n          <text class=\"grid-text\">我的简历</text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport request from '@/utils/request.js'\n\nexport default {\n  data() {\n    return {\n      title: '欢迎使用',\n      resumeList: []  // 用来保存简历列表\n    }\n  },\n  methods: {\n\t// 上传简历处理\n\tasync handleUploadResume() {\n\t\ttry {\n\t\t\t// 1. 检查登录状态\n\t\t\tconst token = uni.getStorageSync('token');\n\t\t\tif (!token) {\n\t\t\t\tuni.showToast({ title: '请先登录', icon: 'none' });\n\t\t\t\treturn uni.switchTab({ url: '/pages/me/me' });\n\t\t\t}\n\n\t\t\t// 2. 选择文件\n\t\t\tconst res = await uni.chooseMessageFile({\n\t\t\t\tcount: 1,\n\t\t\t\ttype: 'file',\n\t\t\t\textension: ['.pdf', '.doc', '.docx']  // 限制文件类型为 .pdf, .doc, .docx\n\t\t\t});\n\n\t\t\t// 3. 获取文件信息\n\t\t\tconst file = res.tempFiles[0];\n\n\t\t\t// 4. 如果文件类型不匹配，提示用户\n\t\t\tconst fileExtension = this.getFileExtension(file.name);\n\t\t\tif (!['pdf', 'doc', 'docx'].includes(fileExtension.toLowerCase())) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请选择PDF或Word文件',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 5. 执行上传\n\t\t\tconst uploadRes = await this.uploadFile(file);\n\t\t\t\n\t\t\t// 6. 处理上传结果\n\t\t\tif (uploadRes.code === '200') {\n\t\t\t\tuni.showToast({ title: '上传成功' });\n\t\t\t} else {\n\t\t\t\tthrow new Error(uploadRes.msg || '上传失败');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('上传失败:', error);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: error.message || '上传失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t},\n\n\t// 获取文件扩展名\n\tgetFileExtension(fileName) {\n\t\tconst index = fileName.lastIndexOf('.');\n\t\tif (index === -1) {\n\t\t\treturn ''; // 无扩展名的文件\n\t\t}\n\t\treturn fileName.substring(index + 1);\n\t},\n\n\t// 封装上传文件方法\n\tuploadFile(file) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tuni.uploadFile({\n\t\t\t\turl: 'https://119.84.246.218:57534/resume/uploadResume',\n\t\t\t\tfilePath: file.path,\n\t\t\t\tname: 'file',\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'multipart/form-data',\n\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t},\n\t\t\t\tformData: {\n\t\t\t\t\tfileName: file.name,  // 只传递文件名\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst data = JSON.parse(res.data);\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treject(new Error('响应解析失败'));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\treject(new Error('网络请求失败'));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\r\n\n    // 点击“我的简历”时获取简历列表\n    async handleMyResume() {\n      try {\n        const token = uni.getStorageSync('token')\n        if (!token) {\n          uni.showToast({ title: '请先登录', icon: 'none' })\n          return uni.switchTab({ url: '/pages/me/me' })\n        }\n\n        // 发送请求获取简历列表\n        const response = await request.get('/myResume', {\n          token: token  // 传递 token\n        })\n\n        if (response.code === '200') {\n          this.resumeList = response.data // 假设返回的数据是一个简历列表\n          uni.navigateTo({\n            url: '/pages/resume-list/resume-list?resumeList=' + JSON.stringify(this.resumeList) // 将简历数据传递到新页面\n          })\n        } else {\n          throw new Error(response.msg || '获取简历列表失败')\n        }\n      } catch (error) {\n        console.error('获取简历列表失败:', error)\n        uni.showToast({ \n          title: error.message || '获取简历列表失败',\n          icon: 'none'\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style src=\"./index.css\"></style>\n"],"sourceRoot":""}